{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/home/project/src/components/Desktop/Desktop.tsx\",\n  _this = this;\nimport React, { useEffect } from 'react';\nimport { useStore } from '../../store/useWindowStore';\nimport { AppIcon } from './AppIcon';\nimport { Taskbar } from './TaskBar';\nimport { Window } from './Window';\nimport { useAppStore } from '../../store/useAppStore';\nimport { useAuthStore } from '../../store/useAuthStore';\nimport { getDefaultApps } from '../../api/apps';\nimport { useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport var Desktop = function Desktop() {\n  var default_apps = getDefaultApps();\n  var _useAppStore = useAppStore(),\n    fetchInstalledApps = _useAppStore.fetchInstalledApps,\n    installedApps = _useAppStore.installedApps;\n  var _useAuthStore = useAuthStore(),\n    getUser = _useAuthStore.getUser;\n  var _useState = useState(window.innerWidth <= 640),\n    _useState2 = _slicedToArray(_useState, 2),\n    isMobile = _useState2[0],\n    setIsMobile = _useState2[1];\n  useEffect(function () {\n    var user = getUser();\n    if (user) fetchInstalledApps(user.id);\n  }, [fetchInstalledApps, getUser]);\n  useEffect(function () {\n    var handleResize = function handleResize() {\n      setIsMobile(window.innerWidth <= 640);\n    };\n    window.addEventListener('resize', handleResize);\n    return function () {\n      return window.removeEventListener('resize', handleResize);\n    };\n  }, []);\n  var _useStore = useStore(),\n    windows = _useStore.windows,\n    isAppOen = _useStore.isAppOen;\n  var apps = default_apps == null ? void 0 : default_apps.concat(installedApps ? installedApps : []);\n  return _jsxDEV(\"div\", {\n    className: \"absolute inset-0 pb-16 pt-safe overflow-hidden\",\n    style: {\n      background: 'linear-gradient(to right bottom, #2D3436, #000428, #004E92, #000428, #2D3436)',\n      backgroundSize: 'cover',\n      backgroundPosition: 'center',\n      backgroundRepeat: 'no-repeat',\n      backgroundAttachment: 'fixed'\n    },\n    children: [_jsxDEV(\"div\", {\n      className: `\n        grid gap-4 p-4\n        ${isMobile ? 'grid-cols-4' : 'grid-cols-6'}\n      `,\n      children: (apps != null ? apps : []).map(function (app) {\n        return _jsxDEV(AppIcon, {\n          app: app,\n          isMobile: isMobile\n        }, app.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 11\n        }, _this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, _this), windows.map(function (window) {\n      return isAppOen(window.app) && _jsxDEV(Window, {\n        window: window,\n        isMobile: isMobile\n      }, window.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 56\n      }, _this);\n    }), _jsxDEV(Taskbar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 37,\n    columnNumber: 5\n  }, _this);\n};","map":{"version":3,"names":["React","useEffect","useStore","AppIcon","Taskbar","Window","useAppStore","useAuthStore","getDefaultApps","useState","jsxDEV","_jsxDEV","Desktop","default_apps","_useAppStore","fetchInstalledApps","installedApps","_useAuthStore","getUser","_useState","window","innerWidth","_useState2","_slicedToArray","isMobile","setIsMobile","user","id","handleResize","addEventListener","removeEventListener","_useStore","windows","isAppOen","apps","concat","className","style","background","backgroundSize","backgroundPosition","backgroundRepeat","backgroundAttachment","children","map","app","fileName","_jsxFileName","lineNumber","columnNumber","_this"],"sources":["/home/project/src/components/Desktop/Desktop.tsx"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { useStore } from '../../store/useWindowStore';\nimport { AppIcon } from './AppIcon';\nimport { Taskbar } from './TaskBar';\nimport { Window } from './Window';\nimport { useAppStore } from '../../store/useAppStore';\nimport { useAuthStore } from '../../store/useAuthStore';\nimport { getDefaultApps } from '../../api/apps';\nimport { useState } from 'react';\n\nexport const Desktop: React.FC = () => {\n  const default_apps = getDefaultApps();\n  const { fetchInstalledApps, installedApps } = useAppStore();\n  const { getUser } = useAuthStore();\n  const [isMobile, setIsMobile] = useState(window.innerWidth <= 640);\n\n  useEffect(() => {\n    const user = getUser();\n    if(user)\n      fetchInstalledApps(user.id);\n  }, [fetchInstalledApps, getUser]);\n\n  useEffect(() => {\n    const handleResize = () => {\n      setIsMobile(window.innerWidth <= 640);\n    };\n\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  const { windows, isAppOen } = useStore();\n\n  const apps = default_apps?.concat(installedApps ? installedApps : []);\n\n  return (\n    <div\n      className=\"absolute inset-0 pb-16 pt-safe overflow-hidden\"\n      style={{\n        background: 'linear-gradient(to right bottom, #2D3436, #000428, #004E92, #000428, #2D3436)',\n        backgroundSize: 'cover',\n        backgroundPosition: 'center',\n        backgroundRepeat: 'no-repeat',\n        backgroundAttachment: 'fixed',\n      }}\n    >\n      <div\n        className={`\n        grid gap-4 p-4\n        ${isMobile ? 'grid-cols-4' : 'grid-cols-6'}\n      `}\n      >\n        {(apps ?? []).map((app) => (\n          <AppIcon key={app.id} app={app} isMobile={isMobile} />\n        ))}\n      </div>\n\n      {windows.map((window) => isAppOen(window.app) && <Window key={window.id} window={window} isMobile={isMobile} />)}\n\n      <Taskbar />\n    </div>\n  );\n};\n"],"mappings":";;;AAAA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AACxC,SAASC,QAAQ,QAAQ,4BAA4B;AACrD,SAASC,OAAO,QAAQ,WAAW;AACnC,SAASC,OAAO,QAAQ,WAAW;AACnC,SAASC,MAAM,QAAQ,UAAU;AACjC,SAASC,WAAW,QAAQ,yBAAyB;AACrD,SAASC,YAAY,QAAQ,0BAA0B;AACvD,SAASC,cAAc,QAAQ,gBAAgB;AAC/C,SAASC,QAAQ,QAAQ,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEjC,OAAO,IAAMC,OAAiB,GAAG,SAApBA,OAAiBA,CAAA,EAAS;EACrC,IAAMC,YAAY,GAAGL,cAAc,CAAC,CAAC;EACrC,IAAAM,YAAA,GAA8CR,WAAW,CAAC,CAAC;IAAnDS,kBAAkB,GAAAD,YAAA,CAAlBC,kBAAkB;IAAEC,aAAa,GAAAF,YAAA,CAAbE,aAAa;EACzC,IAAAC,aAAA,GAAoBV,YAAY,CAAC,CAAC;IAA1BW,OAAO,GAAAD,aAAA,CAAPC,OAAO;EACf,IAAAC,SAAA,GAAgCV,QAAQ,CAACW,MAAM,CAACC,UAAU,IAAI,GAAG,CAAC;IAAAC,UAAA,GAAAC,cAAA,CAAAJ,SAAA;IAA3DK,QAAQ,GAAAF,UAAA;IAAEG,WAAW,GAAAH,UAAA;EAE5BrB,SAAS,CAAC,YAAM;IACd,IAAMyB,IAAI,GAAGR,OAAO,CAAC,CAAC;IACtB,IAAGQ,IAAI,EACLX,kBAAkB,CAACW,IAAI,CAACC,EAAE,CAAC;EAC/B,CAAC,EAAE,CAACZ,kBAAkB,EAAEG,OAAO,CAAC,CAAC;EAEjCjB,SAAS,CAAC,YAAM;IACd,IAAM2B,YAAY,GAAG,SAAfA,YAAYA,CAAA,EAAS;MACzBH,WAAW,CAACL,MAAM,CAACC,UAAU,IAAI,GAAG,CAAC;IACvC,CAAC;IAEDD,MAAM,CAACS,gBAAgB,CAAC,QAAQ,EAAED,YAAY,CAAC;IAC/C,OAAO;MAAA,OAAMR,MAAM,CAACU,mBAAmB,CAAC,QAAQ,EAAEF,YAAY,CAAC;IAAA;EACjE,CAAC,EAAE,EAAE,CAAC;EAEN,IAAAG,SAAA,GAA8B7B,QAAQ,CAAC,CAAC;IAAhC8B,OAAO,GAAAD,SAAA,CAAPC,OAAO;IAAEC,QAAQ,GAAAF,SAAA,CAARE,QAAQ;EAEzB,IAAMC,IAAI,GAAGrB,YAAY,oBAAZA,YAAY,CAAEsB,MAAM,CAACnB,aAAa,GAAGA,aAAa,GAAG,EAAE,CAAC;EAErE,OACEL,OAAA;IACEyB,SAAS,EAAC,gDAAgD;IAC1DC,KAAK,EAAE;MACLC,UAAU,EAAE,+EAA+E;MAC3FC,cAAc,EAAE,OAAO;MACvBC,kBAAkB,EAAE,QAAQ;MAC5BC,gBAAgB,EAAE,WAAW;MAC7BC,oBAAoB,EAAE;IACxB,CAAE;IAAAC,QAAA,GAEFhC,OAAA;MACEyB,SAAS,EAAE;AACnB;AACA,UAAUZ,QAAQ,GAAG,aAAa,GAAG,aAAa;AAClD,OAAQ;MAAAmB,QAAA,EAEC,CAACT,IAAI,WAAJA,IAAI,GAAI,EAAE,EAAEU,GAAG,CAAC,UAACC,GAAG;QAAA,OACpBlC,OAAA,CAACR,OAAO;UAAc0C,GAAG,EAAEA,GAAI;UAACrB,QAAQ,EAAEA;QAAS,GAArCqB,GAAG,CAAClB,EAAE;UAAAmB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,GAAAC,KAAiC,CAAC;MAAA,CACvD;IAAC;MAAAJ,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,GAAAC,KACC,CAAC,EAELlB,OAAO,CAACY,GAAG,CAAC,UAACxB,MAAM;MAAA,OAAKa,QAAQ,CAACb,MAAM,CAACyB,GAAG,CAAC,IAAIlC,OAAA,CAACN,MAAM;QAAiBe,MAAM,EAAEA,MAAO;QAACI,QAAQ,EAAEA;MAAS,GAA9CJ,MAAM,CAACO,EAAE;QAAAmB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,GAAAC,KAAuC,CAAC;IAAA,EAAC,EAEhHvC,OAAA,CAACP,OAAO;MAAA0C,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,GAAAC,KAAE,CAAC;EAAA;IAAAJ,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,GAAAC,KACR,CAAC;AAEV,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}