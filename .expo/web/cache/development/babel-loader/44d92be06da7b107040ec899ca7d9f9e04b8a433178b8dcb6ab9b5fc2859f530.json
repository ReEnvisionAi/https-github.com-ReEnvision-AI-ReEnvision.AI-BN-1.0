{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport { create } from 'zustand';\nexport var useStore = create(function (set, get) {\n  return {\n    windows: [],\n    removeApp: function removeApp(id) {\n      return set(function (state) {\n        return {\n          windows: state.windows.filter(function (window) {\n            return window.app.id !== id;\n          })\n        };\n      });\n    },\n    openWindow: function openWindow(app) {\n      var appOpen = get().windows.find(function (window) {\n        return window.app.id === app.id;\n      });\n      if (appOpen) {\n        return;\n      }\n      set(function (state) {\n        return {\n          windows: [].concat(_toConsumableArray(state.windows), [{\n            id: `${app.id}-${Date.now()}`,\n            app: app,\n            isMinimized: false,\n            isMaximized: false,\n            zIndex: state.windows.length + 1,\n            position: {\n              x: 50 + state.windows.length * 20,\n              y: 50 + state.windows.length * 20\n            },\n            size: {\n              width: app.preferred_width ? app.preferred_width : 800,\n              height: app.preferred_height ? app.preferred_height : 600\n            }\n          }])\n        };\n      });\n    },\n    closeWindow: function closeWindow(id) {\n      return set(function (state) {\n        return {\n          windows: state.windows.filter(function (window) {\n            return window.id !== id;\n          })\n        };\n      });\n    },\n    updateWindow: function updateWindow(updatedWindow) {\n      return set(function (state) {\n        return {\n          windows: state.windows.map(function (window) {\n            return window.id === updatedWindow.id ? updatedWindow : window;\n          })\n        };\n      });\n    },\n    bringToFront: function bringToFront(id) {\n      return set(function (state) {\n        var maxZIndex = Math.max.apply(Math, _toConsumableArray(state.windows.map(function (w) {\n          return w.zIndex;\n        })));\n        return {\n          windows: state.windows.map(function (window) {\n            return _objectSpread(_objectSpread({}, window), {}, {\n              zIndex: window.id === id ? maxZIndex + 1 : window.zIndex\n            });\n          })\n        };\n      });\n    },\n    isAppOen: function isAppOen(app) {\n      var appOpen = get().windows.find(function (window) {\n        return window.app.id === app.id;\n      });\n      if (appOpen) {\n        return true;\n      }\n      return false;\n    }\n  };\n});","map":{"version":3,"names":["create","useStore","set","get","windows","removeApp","id","state","filter","window","app","openWindow","appOpen","find","concat","_toConsumableArray","Date","now","isMinimized","isMaximized","zIndex","length","position","x","y","size","width","preferred_width","height","preferred_height","closeWindow","updateWindow","updatedWindow","map","bringToFront","maxZIndex","Math","max","apply","w","_objectSpread","isAppOen"],"sources":["/home/project/src/store/useWindowStore.ts"],"sourcesContent":["import { create } from 'zustand';\nimport type { Window } from '../types';\nimport type { App } from '../api/apps';\n\nexport interface Store {\n  windows: Window[];\n  removeApp: (id: string) => void;\n  openWindow: (app: App) => void;\n  closeWindow: (id: string) => void;\n  updateWindow: (window: Window) => void;\n  bringToFront: (id: string) => void;\n  isAppOen: (app: App) => boolean;\n}\n\nexport const useStore = create<Store>((set, get) => ({\n  windows: [],\n\n  removeApp: (id) =>\n    set((state) => ({\n      windows: state.windows.filter((window) => window.app.id !== id),\n    })),\n\n  openWindow: (app) => {\n    const appOpen = get().windows.find((window) => window.app.id === app.id);\n    if (appOpen) {\n      return;\n    }\n\n    set((state) => ({\n      windows: [\n        ...state.windows,\n        {\n          id: `${app.id}-${Date.now()}`,\n          app,\n          isMinimized: false,\n          isMaximized: false,\n          zIndex: state.windows.length + 1,\n          position: {\n            x: 50 + state.windows.length * 20,\n            y: 50 + state.windows.length * 20,\n          },\n          size: {\n            width: app.preferred_width ? app.preferred_width : 800,\n            height: app.preferred_height ? app.preferred_height : 600,\n          },\n        },\n      ],\n    }));\n  },\n\n  closeWindow: (id) =>\n    set((state) => ({\n      windows: state.windows.filter((window) => window.id !== id),\n    })),\n\n  updateWindow: (updatedWindow) =>\n    set((state) => ({\n      windows: state.windows.map((window) => (window.id === updatedWindow.id ? updatedWindow : window)),\n    })),\n\n  bringToFront: (id) =>\n    set((state) => {\n      const maxZIndex = Math.max(...state.windows.map((w) => w.zIndex));\n      return {\n        windows: state.windows.map((window) => ({\n          ...window,\n          zIndex: window.id === id ? maxZIndex + 1 : window.zIndex,\n        })),\n      };\n    }),\n\n  isAppOen(app: App) {\n    const appOpen = get().windows.find((window) => window.app.id === app.id);\n    if (appOpen) {\n      return true;\n    }\n\n    return false;\n  },\n}));\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}